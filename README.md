# ğŸ¤– ai-masa - åˆ†æ•£ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ LLM ã‚·ã‚¹ãƒ†ãƒ 

## ğŸŒŸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**Redis Pub/Sub** ã‚’é€šä¿¡åŸºç›¤ã¨ã—ã€**ç•°ãªã‚‹ç‰©ç†ãƒã‚·ãƒ³**ã§ç¨¼åƒã™ã‚‹ LLM ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆGemini CLIã‚’æƒ³å®šï¼‰ãŒå”èª¿ã—ã¦è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’é‚è¡Œã™ã‚‹åˆ†æ•£å‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

ãƒ­ãƒ¼ã‚«ãƒ«ã® **Tmuxinator** ã‚’ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ©ç”¨ã—ã€SSH çµŒç”±ã§ãƒªãƒ¢ãƒ¼ãƒˆã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç®¡ç†ã—ã¾ã™ã€‚

## âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ 

| é …ç›® | è©³ç´° |
| :--- | :--- |
| **é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«** | **JSON** å½¢å¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
| **é€šä¿¡åŸºç›¤** | **Redis Pub/Sub** (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éåŒæœŸé€šä¿¡) |
| **ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** | **Tmuxinator** (ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ã® SSH/ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†) |
| **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåŸºç›¤** | **BaseAgent** (æŠ½è±¡åŒ–ã•ã‚ŒãŸ 
MessageBroker
 ã‚’åˆ©ç”¨) |
| **ã‚¿ã‚¹ã‚¯ç®¡ç†** | SQLite (

) ã‚’ä½¿ç”¨ã—ãŸ Job Pool |

## ğŸ“¦ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ä¾å­˜é–¢ä¿‚

### 1. ã‚µãƒ¼ãƒãƒ¼è¦ä»¶

* **Redis Server**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã¨ã—ã¦å¿…é ˆã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã¾ãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã®å˜ä¸€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå¿…è¦ã§ã™ã€‚

    [?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;30r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[30;1H"setup.sh" [noeol] 185L, 5512B[1;1H[34m#!/bin/bash

# --- Utilities ---[m
[36mprint_help() {[m
    [38;5;130mecho[m[31m [m[38;5;130m"[m[31mUsage: [m[35m$0[m[31m <command>[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m""
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31mCommands:[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31m  init        Generate README.md from template.[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31m  orchestrate   Start the multi-agent system using tmuxinator.[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31m  help        Show this help message.[m[38;5;130m"[m
[36m}[m

[34m# --- Main Commands ---[m
[36minit_project() {[m
    [38;5;130mlocal[m[36m root_dir[m[38;5;130m="[m[31mai_masa[m[38;5;130m"
[m    [38;5;130mlocal[m[36m readme_path[m[38;5;130m="[m[35m$root_dir[m[31m/README.md[m[38;5;130m"
[m    [38;5;130mlocal[m[36m repo_name[m[38;5;130m="[m[31mai-masa[m[38;5;130m"[m [34m# pyproject.tomlã¨åŒã˜åå‰ã‚’ä½¿ç”¨[m[19;5H[38;5;130mecho[m[31m [m[38;5;130m"[m[31mğŸ“[19;13H Generating [m[35m$readme_path[m[31m...[m[38;5;130m"[m[21;5H[34m# README.md ã®å†…å®¹ã‚’ãƒ’ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§æ›¸ãè¾¼ã¿[m
    [38;5;130mcat[m [38;5;130m<< EOF[m[31m > "[m[35m$readme_path[m[31m"
# ğŸ¤–[23;5H [m[35m${repo_name}[m[31m - åˆ†æ•£ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ LLM ã‚·ã‚¹ãƒ†ãƒ 

## ğŸŒŸ[25;6H ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**Redis Pub/Sub** ã‚’é€šä¿¡åŸºç›¤ã¨ã—ã€**ç•°ãªã‚‹ç‰©ç†ãƒã‚·ãƒ³**ã§ç¨¼åƒã™ã‚‹ LLM ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆGemini CLIã‚’æƒ³å®šï¼‰[m[94m>>[m[28;1H[31mãŒå”èª¿ã—ã¦è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’é‚è¡Œã™ã‚‹åˆ†æ•£å‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚[m[30;103H20,0-1[8CTop[20;1H[?25h[?4m[?25l[30;93H^M[20;1H[30;93H  [21;5H[30;104H1,5  [21;5H[?25h[30;1H[?2004l[>4;m[23;2t[23;1t[30;1H[K[30;1H[?1004l[?2004l[?1l>[?1049l[23;0;0t[>4;m[?1049h[22;0;0t[>4;2m[?1h=[?2004h[?1004h[1;30r[?12h[?12l[22;2t[22;1t[27m[23m[29m[m[H[2J[?25l[30;1H"setup.sh" [noeol] 185L, 5512B[1;1H[34m#!/bin/bash

# --- Utilities ---[m
[36mprint_help() {[m
    [38;5;130mecho[m[31m [m[38;5;130m"[m[31mUsage: [m[35m$0[m[31m <command>[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m""
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31mCommands:[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31m  init        Generate README.md from template.[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31m  orchestrate   Start the multi-agent system using tmuxinator.[m[38;5;130m"
[m    [38;5;130mecho[m[31m [m[38;5;130m"[m[31m  help        Show this help message.[m[38;5;130m"[m
[36m}[m

[34m# --- Main Commands ---[m
[36minit_project() {[m
    [38;5;130mlocal[m[36m root_dir[m[38;5;130m="[m[31mai_masa[m[38;5;130m"
[m    [38;5;130mlocal[m[36m readme_path[m[38;5;130m="[m[35m$root_dir[m[31m/README.md[m[38;5;130m"
[m    [38;5;130mlocal[m[36m repo_name[m[38;5;130m="[m[31mai-masa[m[38;5;130m"[m [34m# pyproject.tomlã¨åŒã˜åå‰ã‚’ä½¿ç”¨[m[19;5H[38;5;130mecho[m[31m [m[38;5;130m"[m[31mğŸ“[19;13H Generating [m[35m$readme_path[m[31m...[m[38;5;130m"[m[21;5H[34m# README.md ã®å†…å®¹ã‚’ãƒ’ã‚¢ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§æ›¸ãè¾¼ã¿[m
    [38;5;130mcat[m [38;5;130m<< EOF[m[31m > "[m[35m$readme_path[m[31m"
# ğŸ¤–[23;5H [m[35m${repo_name}[m[31m - åˆ†æ•£ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ LLM ã‚·ã‚¹ãƒ†ãƒ 

## ğŸŒŸ[25;6H ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**Redis Pub/Sub** ã‚’é€šä¿¡åŸºç›¤ã¨ã—ã€**ç•°ãªã‚‹ç‰©ç†ãƒã‚·ãƒ³**ã§ç¨¼åƒã™ã‚‹ LLM ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆGemini CLIã‚’æƒ³å®šï¼‰[m[94m>>[m[28;1H[31mãŒå”èª¿ã—ã¦è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’é‚è¡Œã™ã‚‹åˆ†æ•£å‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚[m[30;103H21,5[10CTop[21;5H[?25h[?4m[30;1H[?2004l[>4;m[23;2t[23;1t[30;1H[K[30;1H[?1004l[?2004l[?1l>[?1049l[23;0;0t[>4;m

### 2. ç’°å¢ƒæ§‹ç¯‰

    PID TTY          TIME CMD
   1591 pts/2    00:00:00 bash
   3694 pts/2    00:00:00 setup.sh
   3695 pts/2    00:00:00 setup.sh
   3884 pts/2    00:00:00 setup.sh
   3885 pts/2    00:00:00 bash
   4034 pts/2    00:00:00 ps
    PID TTY          TIME CMD
   1591 pts/2    00:00:00 bash
   3694 pts/2    00:00:00 setup.sh
   3695 pts/2    00:00:00 setup.sh
   3884 pts/2    00:00:00 setup.sh
   3885 pts/2    00:00:00 bash
   4035 pts/2    00:00:00 ps
ai_masa
config
setup.sh
tests

## ğŸš€ èµ·å‹•æ–¹æ³• (Orchestration)

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**Tmuxinator** ã‚’åˆ©ç”¨ã—ã¦è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’åŠ¹ç‡çš„ã«èµ·å‹•ãƒ»ç®¡ç†ã—ã¾ã™ã€‚

### 1. å‰ææ¡ä»¶

*   **Tmux**: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¯ã‚µãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚
*   **Tmuxinator**: TmuxinatorãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã€‚
    

### 2. èµ·å‹•

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã§ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ã„ãŸTmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ã€ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå„ãƒšã‚¤ãƒ³ã§è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

Orchestrating agents with tmuxinator...
âœ… Generated tmuxinator config at /home/katayamata/.config/tmuxinator/ai_masa_orchestration.yml
ğŸš€ Starting tmuxinator session: ai_masa_orchestration
[exited]

ã“ã‚Œã«ã‚ˆã‚Šã€ ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚

## ğŸ§ª ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

é€šä¿¡çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã€Redis Pub/Sub çµŒç”±ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ­£ã—ãæµã‚Œã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚

[RedisBroker] Connected to localhost:6379
[RedisBroker] Connected to localhost:6379

--- Testing Redis Pub/Sub ---
[Chief] Listening on Redis...
[Calculator] Listening on Redis...
[RedisBroker] Subscribed to channel: ai_masa_channel
[RedisBroker] Subscribed to channel: ai_masa_channel
[Test] Chief sends request...
[Chief][default] ğŸš€ Sent to Calculator: æ–­é¢ç©ã‚’è¨ˆç®—ã—ã¦
[Calculator][default] ğŸš€ Sent to Chief: è¨ˆç®—å®Œäº†: 100mm2
--- Test Passed âœ… ---

## ğŸ“‚ ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«ã¨å½¹å‰²

| ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | å½¹å‰² |
| :--- | :--- |
| 

 | **MessageBroker** ã®æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹ (ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹) |
| 

 | Redis ã® Pub/Sub æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ãŸå…·è±¡å®Ÿè£… |
| 

 | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®åŸºåº•ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ

, 

ï¼‰ |
| 

 | JSON é€šä¿¡ã®ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ« |
| 

 | Redis ã‚’ä½¿ç”¨ã—ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ã®çµ±åˆãƒ†ã‚¹ãƒˆ |
